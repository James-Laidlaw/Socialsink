<div id="profile-bar" style="overflow: hidden;">
    <img src="../../../static/images/user_bg.jpg" class="user-bg" />
    <img src="../../../static/images/unknown_user.png" class="profile-img" />
    <div class="user-box">
        <h3 class="username">{{ user.username}}</h3>
        <p class="useremail">{{ user.email }}</p>
        <p class="userbio">My user bio can be read here</p>
    </div>
    <div class="follow-box">
        <div>
            <p id="following-count" class="count"></p>
            <p class="count-label">Following</p>
        </div>
        <div>
            <p id="friend-count" class="count"></p>
            <p class="count-label">Friends</p>
        </div>
    </div>
</div>

<script>
    function getFollowingCount() {
        $.ajax({
            type: "GET",
            url: "api/following/",
            success: function (response, textStatus, http) {
                followingCount = document.getElementById('following-count');
                friendCount = document.getElementById('friend-count');

                followingCount.innerText = Object.keys(response).length;

                friendCounter = 0
                for (i in response) {
                    if (response[i].friendship) {
                        friendCounter += 1;
                    }
                }
                friendCount.innerText = friendCounter;
            },
            error: function (error) {
                console.error(error);
            }
        })
    }

    getFollowingCount();
    // Update interval
    setInterval(getFollowingCount, 5000);
</script>